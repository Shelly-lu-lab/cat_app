#!/bin/bash

# AIäº‘å…»çŒ«é¡¹ç›®å¿«é€Ÿå¯åŠ¨è„šæœ¬
echo "ğŸš€ å¯åŠ¨AIäº‘å…»çŒ«å¼€å‘æœåŠ¡å™¨..."

# æ£€æŸ¥æ˜¯å¦åœ¨æ­£ç¡®çš„ç›®å½•
if [ ! -f "package.json" ]; then
    echo "âŒ é”™è¯¯ï¼šè¯·åœ¨ai-cat-appç›®å½•ä¸­è¿è¡Œæ­¤è„šæœ¬"
    exit 1
fi

# æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨
if lsof -Pi :5173 -sTCP:LISTEN -t >/dev/null ; then
    echo "âš ï¸  ç«¯å£5173å·²è¢«å ç”¨ï¼Œå°è¯•ä½¿ç”¨å…¶ä»–ç«¯å£..."
    npm run dev -- --port 5174
else
    echo "âœ… ç«¯å£5173å¯ç”¨ï¼Œå¯åŠ¨æœåŠ¡å™¨..."
    # ä½¿ç”¨watchæ¨¡å¼ï¼Œæ–‡ä»¶å˜åŒ–æ—¶è‡ªåŠ¨é‡å¯
    npm run dev -- --watch
fi 